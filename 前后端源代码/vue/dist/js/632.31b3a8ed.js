"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[632],{5632:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});i(4114);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticStyle:{margin:"200px auto",width:"360px",height:"320px"}},[t._m(0),e("el-form",{ref:"userForm",staticStyle:{padding:"0 20px"},attrs:{model:t.user,rules:t.rules}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-user"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("el-form-item",[e("el-button",{staticStyle:{width:"100%","background-color":"dodgerblue",border:"1px solid dodgerblue",color:"white"},attrs:{size:"medium"},on:{click:t.login}},[t._v("登录")])],1),e("el-form-item",{staticStyle:{margin:"10px 0"}},[e("el-button",{staticStyle:{color:"orange"},attrs:{size:"medium",type:"text"},on:{click:function(e){return t.$router.push("/register")}}},[t._v("立即注册")])],1)],1)],1),e("el-dialog",{attrs:{title:"找回密码",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.pass.username,callback:function(e){t.$set(t.pass,"username",e)},expression:"pass.username"}})],1),e("el-form-item",{attrs:{label:"手机号"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.pass.phone,callback:function(e){t.$set(t.pass,"phone",e)},expression:"pass.phone"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.passwordBack}},[t._v("重置密码")])],1)],1)],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"20px 0",color:"dodgerblue","text-align":"center","font-size":"30px"}},[e("b",[t._v("企业员工管理系统")])])}],r=i(9325),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"s-canvas"},[e("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])},n=[],l={name:"Identify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:28},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:40}},methods:{randomNum(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor(t,e){var i=this.randomNum(t,e),s=this.randomNum(t,e),o=this.randomNum(t,e);return"rgb("+i+","+s+","+o+")"},drawPic(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(let i=0;i<this.identifyCode.length;i++)this.drawText(e,this.identifyCode[i],i);this.drawLine(e),this.drawDot(e)},drawText(t,e,i){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var s=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),o=this.randomNum(this.fontSizeMax,this.contentHeight-5),r=this.randomNum(-30,30);t.translate(s,o),t.rotate(r*Math.PI/270),t.fillText(e,0,0),t.rotate(-r*Math.PI/270),t.translate(-s,-o)},drawLine(t){for(let e=0;e<2;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot(t){for(let e=0;e<20;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},d=l,u=i(1656),m=(0,u.A)(d,a,n,!1,null,"2ed71a64",null),h=m.exports,c={name:"Login",data(){return{user:{},pass:{},code:"",dialogFormVisible:!1,identifyCode:"",identifyCodes:"3456789ABCDEFGHGKMNPQRSTUVWXY",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:10,message:"长度在 2 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},components:{Identify:h},mounted(){(0,r.dg)(),this.refreshCode()},methods:{login(){this.$refs["userForm"].validate((t=>{t&&this.request.post("/user/login",this.user).then((t=>{"200"===t.code?(localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("menus",JSON.stringify(t.data.menus)),(0,r.zR)(),this.$router.push("/"),this.$message.success("登录成功")):this.$message.error(t.msg)}))}))},refreshCode(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode(t,e){for(let i=0;i<e;i++)this.identifyCode+=this.identifyCodes[Math.floor(Math.random()*this.identifyCodes.length)]},handlePass(){this.dialogFormVisible=!0,this.pass={}},passwordBack(){this.request.put("/user/reset",this.pass).then((t=>{"200"===t.code?(this.$message.success("重置密码成功，新密码为：123，请尽快修改密码"),this.dialogFormVisible=!1):this.$message.error(t.msg)}))}}},f=c,p=(0,u.A)(f,s,o,!1,null,null,null),g=p.exports}}]);
//# sourceMappingURL=632.31b3a8ed.js.map