{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Manager\",\n  data() {\n    return {\n      user: {},\n      time: getTime(),\n      collapse: false,\n      menuWidth: '200px',\n      icon: 'el-icon-s-fold'\n    };\n  },\n  created() {\n    // 从后台获取最新的User数据\n    this.getUser();\n    setInterval(() => {\n      this.time = getTime();\n    }, 1000);\n  },\n  methods: {\n    handleCollapse() {\n      this.collapse = !this.collapse;\n      this.menuWidth = this.menuWidth === '64px' ? '200px' : '64px';\n      this.icon = this.icon === 'el-icon-s-unfold' ? 'el-icon-s-fold' : 'el-icon-s-unfold';\n    },\n    getUser() {\n      let userId = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).id : 0;\n      if (userId) {\n        // 从后台获取User数据\n        this.request.get(\"/user/\" + userId).then(res => {\n          // 重新赋值后台的最新User数据\n          this.user = res.data;\n        });\n      } else {\n        this.$router.push('/login');\n      }\n    },\n    logout() {\n      localStorage.removeItem('user');\n      this.$router.push('/login');\n    }\n  }\n};\nfunction getTime() {\n  // 获取时间戳\n  const newDate = new Date();\n  const year = newDate.getFullYear();\n  let month = newDate.getMonth() + 1;\n  const date = newDate.getDate();\n  let hour = newDate.getHours();\n  let minute = newDate.getMinutes();\n  let second = newDate.getSeconds();\n  if (hour < 10) {\n    hour = \"0\" + hour;\n  }\n  if (minute < 10) {\n    minute = \"0\" + minute;\n  }\n  if (second < 10) {\n    second = \"0\" + second;\n  }\n  return `${year}/${month}/${date} ${hour}:${minute}:${second}`;\n}","map":{"version":3,"names":["name","data","user","time","getTime","collapse","menuWidth","icon","created","getUser","setInterval","methods","handleCollapse","userId","localStorage","getItem","JSON","parse","id","request","get","then","res","$router","push","logout","removeItem","newDate","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds"],"sources":["src/views/Manage.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- header-->\n    <div style=\"height: 40px; line-height: 40px; background-color: dodgerblue; display: flex\">\n      <div style=\"font-size: 16px; color: #eee; font-weight: bold; width: 200px; text-align: center\">\n        企业员工管理系统\n      </div>\n\n      <div style=\"flex: 1\">\n        <i :class=\"icon\" style=\"font-size: 20px; color: white; position: relative; top: 2px; cursor: pointer;\"\n          @click=\"handleCollapse\"></i>\n      </div>\n\n      <div style=\"width: 400px;  display: flex; padding-right: 30px;\">\n        <div style=\"flex: 1; color: white; font-size: 14px; text-align: right; margin-right: 10px\">北京时间： {{ time }}\n        </div>\n        <el-dropdown placement=\"bottom\" style=\"text-align: right;\">\n          <el-avatar :size=\"30\" style=\"margin-top: 5px\" :src=\"user.avatarUrl\"></el-avatar>\n\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item>\n              <div @click=\"$router.push('/person')\">个人信息</div>\n            </el-dropdown-item>\n            <el-dropdown-item>\n              <div @click=\"logout\">退出登录</div>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n\n      </div>\n    </div>\n\n    <!-- bottom -->\n    <div style=\"display: flex; min-height: calc(100vh - 40px)\">\n      <!-- aside -->\n      <div :style=\"{ 'width': menuWidth }\">\n        <el-menu style=\"min-height: 100%; overflow-x: hidden;\" :default-active=\"$route.path\" :collapse=\"collapse\"\n          :collapse-transition=\"false\" router>\n          <el-menu-item index=\"/home\">\n            <i class=\"el-icon-s-home\"></i>\n            <span slot=\"title\">主页</span>\n          </el-menu-item>\n          <el-menu-item index=\"/front/home\" v-if=\"user.role === 'ROLE_USER'\">\n            <i class=\"el-icon-eleme\"></i>\n            <span slot=\"title\">前端页面</span>\n          </el-menu-item>\n          <!-- <el-menu-item index=\"/department\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-menu\"></i>\n            <span slot=\"title\">部门管理</span>\n          </el-menu-item> -->\n          <el-menu-item index=\"/employee\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-user\"></i>\n            <span slot=\"title\">员工管理</span>\n          </el-menu-item>\n          <el-menu-item index=\"/salary\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-star-on\"></i>\n            <span slot=\"title\">工资管理</span>\n          </el-menu-item>\n          <el-menu-item index=\"/leaverecords\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-user-solid\"></i>\n            <span slot=\"title\">请假管理</span>\n          </el-menu-item>\n          <el-menu-item index=\"/attendrecords\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-phone\"></i>\n            <span slot=\"title\">出勤管理</span>\n          </el-menu-item>\n          <el-menu-item index=\"/user\" v-if=\"user.role === 'ROLE_ADMIN'\">\n            <i class=\"el-icon-s-custom\"></i>\n            <span slot=\"title\">用户管理</span>\n          </el-menu-item>\n\n        </el-menu>\n      </div>\n\n      <!-- main -->\n      <div style=\"width: 0; flex: 1; padding: 10px\">\n        <router-view @refreshUser=\"getUser\" />\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Manager\",\n\n  data() {\n    return {\n      user: {},\n      time: getTime(),\n      collapse: false,\n      menuWidth: '200px',\n      icon: 'el-icon-s-fold',\n    }\n  },\n  created() {\n    // 从后台获取最新的User数据\n    this.getUser()\n\n    setInterval(() => {\n      this.time = getTime()\n    }, 1000)\n  },\n  methods: {\n    handleCollapse() {\n      this.collapse = !this.collapse\n      this.menuWidth = this.menuWidth === '64px' ? '200px' : '64px'\n      this.icon = this.icon === 'el-icon-s-unfold' ? 'el-icon-s-fold' : 'el-icon-s-unfold'\n    },\n    getUser() {\n      let userId = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).id : 0\n      if (userId) {\n        // 从后台获取User数据\n        this.request.get(\"/user/\" + userId).then(res => {\n          // 重新赋值后台的最新User数据\n          this.user = res.data\n        })\n      } else {\n        this.$router.push('/login')\n      }\n    },\n    logout() {\n      localStorage.removeItem('user')\n      this.$router.push('/login')\n    }\n  }\n}\n\nfunction getTime() {\n  // 获取时间戳\n  const newDate = new Date();\n  const year = newDate.getFullYear();\n  let month = newDate.getMonth() + 1;\n  const date = newDate.getDate();\n  let hour = newDate.getHours();\n  let minute = newDate.getMinutes();\n  let second = newDate.getSeconds();\n  if (hour < 10) {\n    hour = \"0\" + hour\n  }\n  if (minute < 10) {\n    minute = \"0\" + minute\n  }\n  if (second < 10) {\n    second = \"0\" + second\n  }\n  return `${year}/${month}/${date} ${hour}:${minute}:${second}`;\n}\n</script>\n\n<style scoped>\n.el-submenu /deep/.el-submenu__title {\n  height: 40px;\n  line-height: 40px;\n}\n\n/deep/.el-menu-item {\n  height: 40px;\n  line-height: 40px;\n}\n</style>"],"mappings":";AAoFA;EACAA,IAAA;EAEAC,KAAA;IACA;MACAC,IAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;MACAC,SAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,OAAA;IAEAC,WAAA;MACA,KAAAP,IAAA,GAAAC,OAAA;IACA;EACA;EACAO,OAAA;IACAC,eAAA;MACA,KAAAP,QAAA,SAAAA,QAAA;MACA,KAAAC,SAAA,QAAAA,SAAA;MACA,KAAAC,IAAA,QAAAA,IAAA;IACA;IACAE,QAAA;MACA,IAAAI,MAAA,GAAAC,YAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,UAAAG,EAAA;MACA,IAAAL,MAAA;QACA;QACA,KAAAM,OAAA,CAAAC,GAAA,YAAAP,MAAA,EAAAQ,IAAA,CAAAC,GAAA;UACA;UACA,KAAApB,IAAA,GAAAoB,GAAA,CAAArB,IAAA;QACA;MACA;QACA,KAAAsB,OAAA,CAAAC,IAAA;MACA;IACA;IACAC,OAAA;MACAX,YAAA,CAAAY,UAAA;MACA,KAAAH,OAAA,CAAAC,IAAA;IACA;EACA;AACA;AAEA,SAAApB,QAAA;EACA;EACA,MAAAuB,OAAA,OAAAC,IAAA;EACA,MAAAC,IAAA,GAAAF,OAAA,CAAAG,WAAA;EACA,IAAAC,KAAA,GAAAJ,OAAA,CAAAK,QAAA;EACA,MAAAC,IAAA,GAAAN,OAAA,CAAAO,OAAA;EACA,IAAAC,IAAA,GAAAR,OAAA,CAAAS,QAAA;EACA,IAAAC,MAAA,GAAAV,OAAA,CAAAW,UAAA;EACA,IAAAC,MAAA,GAAAZ,OAAA,CAAAa,UAAA;EACA,IAAAL,IAAA;IACAA,IAAA,SAAAA,IAAA;EACA;EACA,IAAAE,MAAA;IACAA,MAAA,SAAAA,MAAA;EACA;EACA,IAAAE,MAAA;IACAA,MAAA,SAAAA,MAAA;EACA;EACA,UAAAV,IAAA,IAAAE,KAAA,IAAAE,IAAA,IAAAE,IAAA,IAAAE,MAAA,IAAAE,MAAA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}